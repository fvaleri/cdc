DROP ROLE IF EXISTS cdcadmin;

CREATE SCHEMA cdc;
CREATE USER cdcadmin WITH ENCRYPTED PASSWORD 'cdcadmin';
ALTER ROLE cdcadmin SET client_encoding = 'UTF8';

CREATE TABLE cdc.customers (
    id BIGSERIAL NOT NULL PRIMARY KEY,
    first_name VARCHAR(255) NOT NULL,
    last_name VARCHAR(255) NOT NULL,
    email VARCHAR(255) NOT NULL UNIQUE
);

GRANT CONNECT ON DATABASE cdcdb TO cdcadmin;
GRANT USAGE ON SCHEMA cdc TO cdcadmin;
GRANT ALL PRIVILEGES ON ALL SEQUENCES IN SCHEMA cdc TO cdcadmin;
GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA cdc TO cdcadmin;
